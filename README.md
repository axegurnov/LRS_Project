# LRS_Project
LRS Project
by ImageSpark
В корневом каталоге LRS_Project находятся несколько подкаталогов app, js, css, img
 - подкаталог app содержит основной модуль приложения
 - подкаталог css содержит все общедоступные CSS-файлы;
 - подкаталог img содержит общедоступные изображения (.JPG, .PNG, .GIF, и т.д);
 - подкаталог js хранит общедоступные JavaScript-файлы;
app/
    config/
    controllers/
    core/
    lib/
    models/
    views/
        layouts
css/
img/
js/
Директория app содержит подкаталоги config, controllers, core, lib, models, views
 - подкаталог config содержит вспомогательныу файлы для отладки ошибок и осуществления миграции базы данных
 - подкаталог controllers содержит все контроллеры
 - подкаталог core содержит родительские классы Model, View, Controller
 - подкаталог lib содержит файлы подключаемых библиотек
 - подкаталог models содержит все необходимые модели
 - подкаталог views содержит все необходимые представления



<<<<<<< HEAD
=======
1. How to use Migrations
Create database name LRS. In file index.php uncommented //require 'app/config/Migration.php'.
Migrations in file /app/config/Migration.php.

2. Класс Cotroller - данный класс является родителем для всех контроллеров, используемых в программе. В него вынесены все основные функции, дублирующиеся в потомках.
Используемые параметры:
- $model, $view - подключаемые модели и вью соответственно
- $route - путь, принимаемый из роутера и используемый в качестве автоподключения модели и вью
- $table - сущность, указываемая при вызове дочернего контроллера и используемая далее в модели

а) public function __construct($route) - Функция принимает в качестве параметра путь, задаваемый в роутере и автоматически подключает необходимые View и Models.
б) private function getModel($nameModel) - Функция автоподключения модели.
в) public function index() - Функция получения списка из базы данных. В функции по умолчанию задаётся количество страниц равное нулю, что является сигналом для вывода всех записей из заданной таблицы на экран. Если количество страниц задано явно, то выводятся строки в определённом диапазоне. Здесь же происходит проверка запроса на sql-инъекции.
г) public function add() - Функция добавления в базу данных. В качестве передаваемых далее параметров рассматривается неограниченный по размеру GET-массив. Массив GET проверяется на наличие каких-либо параметров для внесения в sql-таблицу, поэтому значение параметров должно быть больше единицы (поскольку добавление рассматривается как универсальная функция). Первым действием из него извлекается и удаляется часть, ответственная за путь роутера. Затем происходит проверка на sql-инъекции, полученные параметры передаются в модель.
д) public function delete() - Функция удаления из базы данных. В качестве передаваемого в модель параметра рассматривается id, проверяется на наличие инъекций и отправляется в модель.
е) public function editget() - Функция получения редактируемых данных из базы данных. В качестве передаваемого в модель параметра рассматривается id, проверяется на наличие инъекций и отправляется в модель.
ж) public function editput() - Функция обновления информации в базе данных. В качестве параметров, передаваемых в модель, рассматриваются GET-массив, из которого удаляется часть, связанная с путём из роутера, отдельно извлекается id изменяемой записи, а остальные параметры передаются в качестве данных, которые необходимо изменить.
з) public function convert($array) - Функция конвертирования полученного из модели ответа в json-массив. Так как модель не работает непосредственно с данными, то она возвращает только массив в определённом формате, а все его преобразования выполняются уже в контроллере.

3. Контроллеры-потомки содержат либо уникальные действия для каждого случая, либо информацию, необходимую классу Controller для функционирования (например, название таблицы).
>>>>>>> f6b9977e7468fd29bc1fe2656a8c44178e3832c4
